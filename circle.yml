machine:
  node:
    version: 0.10.22
  services:
    - docker

dependencies:
  pre:
    - pip install awscli
    - docker build -t circleci/taaas:$CIRCLE_SHA1 .

deployment:
  staging:
    branch: master
    codedeploy:
      appname-1234:
        application_root: /
        region: eu-west-1
        revision_location:
          revision_type: S3
          s3_location:
            bucket: cwintle-eb
            key_pattern: taaas-{BRANCH}-{SHORT_COMMIT}
        deployment_group: my-deployment-group

